<!--seulement la show pour les challenges-->
<h3 class="section-title mb-3">Buddies involved</h3>
<div class="friends my-3">
  <% @challenge.ongoing_challengers.each do |challenger| %>
    <div class="challenge-friend mx-2">
      <div class="challenge-friend-avatar friend-ongoing">
        <p class="mb-0"><%= challenger.first_name[0] %></p>
      </div>
      <p style="margin-bottom: 0;"><%= challenger.nickname %></p>
    </div>
  <% end %>
  <% @challenge.achieved_challengers.each do |challenger| %>
    <div class="challenge-friend mx-2">
      <div class="challenge-friend-avatar friend-achieved">
        <p class="mb-0"><%= challenger.first_name[0] %></p>
      </div>
      <p style="margin-bottom: 0;"><%= challenger.nickname %></p>
    </div>
  <% end %>
</div>

<h3 class="section-title mb-3">Challenge details</h3>
<%= render partial: "challenges/challenge_card", locals: { challenge: @challenge, clickable: false } %>

<div class="challenge-show-bottom my-3">
  <p>Ready to move your body? ðŸ’ª</p>
  <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">I'm ready!</button>
</div>

<div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel" data-controller="multi-step-form">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasBottomLabel"></h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body small">
    <%= simple_form_for @challenge, url: join_challenge_path, method: :post do |f| %>
      <%= simple_fields_for @user_pact do |up| %>
      <div data-multi-step-form-target="step">
        <div class="mb-3">
          <h3>Or give:</h3>
            <div class="stepper-wrapper" data-controller="stepper">
              <button type="button" data-action="click->stepper#decrement">-</button>
              <%= up.number_field :bet, value: 10, min: 1, class: 'form-control', 'data-stepper-target': 'value', 'data-multi-step-form-target': 'bet' %>
              <button type="button" data-action="click->stepper#increment">+</button>
            </div>

          <h3>to:</h3>
            <div class="beneficiary-wrapper d-flex justify-content-around flex-wrap mt-4">
              <% @beneficiaries.each do |beneficiary| %>
                <%= up.radio_button :beneficiary_id, beneficiary.id, class: 'beneficiary-selector d-none', id: "beneficiary_#{beneficiary.id}", data: { 'multi-step-form-target': 'beneficiary' } %>
                <label for="beneficiary_<%= beneficiary.id %>" class="beneficiary-item" style="background-image: url('<%= beneficiary_image(beneficiary) %>');">
                </label>
              <% end %>
            </div>

        </div>
      </div>
      <% end %>
    <%= f.submit %>
    <% end %>
  </div>
</div>
